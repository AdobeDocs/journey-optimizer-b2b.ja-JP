---
title: SMS オーサリング
description: 顧客のモバイルデバイスにテキストメッセージ（SMS）を送信する方法、および SMS エディターでテキスト形式のメッセージをパーソナライズおよびプレビューする方法について説明します。
feature: SMS Authoring, Content
exl-id: bd648253-74de-4083-a37a-ab7ceaea2746
source-git-commit: eea4afcf352eeefbd5a67c4bfff6a4c2ec559319
workflow-type: tm+mt
source-wordcount: '1908'
ht-degree: 3%

---

# SMS オーサリング

Adobe Journey Optimizer B2B Edition を使用すると、モバイルデバイスの顧客にテキストメッセージ（SMS）を送信できます。 SMS エディターで、テキスト形式のメッセージの作成、パーソナライズおよびプレビューを行うことができます。

## SMS 設定

Adobe Journey Optimizer B2B Edition は、SMS サービスプロバイダー（または SMS ゲートウェイプロバイダー）を通じてテキストメッセージを送信します。 SMS メッセージを作成する前に、_管理者_ 設定からサービスプロバイダーを設定します。

### SMS ゲートウェイサービスプロバイダー

Adobe Journey Optimizer B2B Edition は現在、独立してテキストメッセージサービスを提供するサードパーティプロバイダーと統合されています。 テキストメッセージのサポートされているプロバイダーは、Sinch、Twilio および Infobip です。

Adobe Journey Optimizer B2B Edition で SMS チャネルを設定する前に、これらのプロバイダーのいずれかでアカウントを作成して、API トークンとサービス ID を取得する必要があります。 これらの資格情報は、Adobe Journey Optimizer B2B Edition と該当するプロバイダーとの接続を設定するために必要です。

>[!IMPORTANT]
>
>テキストメッセージサービスを使用した場合、該当するプロバイダーが定める追加の利用条件に同意したとみなされます。サードパーティのソリューションとして、Sinch、Twilio、Infobip は、Adobe Journey Optimizer B2B Edition のユーザーが統合を通じて利用できます。 サードパーティ製品について、アドビは一切関係せず、責任も負いません。テキストメッセージサービス（SMS）に関する問題やサポートのリクエストについては、プロバイダーにお問い合わせください。

### 既存の SMS API 設定の検証

>[!NOTE]
>
>説明された設定は、SMS 管理者権限を持つユーザーのみがアクセスできます。

左側のナビゲーションで、「**[!UICONTROL 管理者]**」セクションを展開し、「**[!UICONTROL 設定]**」をクリックします。

![AMA API 認証情報の設定へのアクセス ](./assets/config-sms-api.png){width="800" zoomable="yes"}

このページには、お使いのインスタンスで使用可能な API 設定が一覧表示されます。 表示される API 資格情報は、SMS サービスプロバイダーまたは作成者がフィルタリングできます。

![ フィルターアイコンをクリックして、API 資格情報のリストをフィルタリング ](./assets/config-sms-api-filter.png){width="500"}

### SMS サービスプロバイダーの新しい API 資格情報の作成

>[!BEGINTABS]

>[!TAB  シンチ ]

_Adobe Journey Optimizer B2B Edition で Sinch を SMS プロバイダーとして設定するには：_

1. 左側のナビゲーションで、「**[!UICONTROL 管理者]**」セクションを展開し、「**[!UICONTROL 設定]**」をクリックします。

1. **[!UICONTROL API 資格情報]** リストの右上にある「_[!UICONTROL 新しい API 資格情報の作成]_ をクリックします。

1. SMS API 資格情報を設定します。

   ![Sinch SMS API 資格情報の設定 ](./assets/config-sms-api-sinch.png){width="500"}

   * **[!UICONTROL SMS ベンダー]** - SMS プロバイダーとして「`Sinch`」を選択します。

   * **[!UICONTROL 名前]** - API 資格情報の名前を入力します。

   * **[!UICONTROL サービス ID]** および **[!UICONTROL API トークン]** - Sinch アカウントから API ページにアクセスします（資格情報は「SMS」タブで確認できます）。

   Sinch アカウントでこの情報を見つける方法について詳しくは、[Sinch 開発者向けドキュメント ](https://developers.sinch.com/docs/sms/getting-started/#2-get-credentials) を参照してください。

1. API 資格情報の設定の詳細が完了したら、「**[!UICONTROL 送信]**」をクリックします。

>[!TAB  ツイリオ ]

_Adobe Journey Optimizer B2B Edition で Twilio を SMS プロバイダーとして設定するには：_

1. 左側のナビゲーションで、「**[!UICONTROL 管理者]**」セクションを展開し、「**[!UICONTROL 設定]**」をクリックします。

1. **[!UICONTROL API 資格情報]** リストの右上にある「_[!UICONTROL 新しい API 資格情報の作成]_ をクリックします。

1. SMS API 資格情報を設定します。

   ![Twilio SMS API 資格情報の設定 ](./assets/config-sms-api-twilio.png){width="500"}

   * **[!UICONTROL SMS ベンダー]** - SMS プロバイダーとして「`Twilio`」を選択します。

   * **[!UICONTROL 名前]** - API 資格情報定義の名前を入力します。

   * **[!UICONTROL アカウント SID]** および **[!UICONTROL 認証トークン]** - Twilio コンソールダッシュボードページの _アカウント情報_ パネルにアクセスして、資格情報を検索します。

   Twilio アカウントでこの情報を見つける方法については、[Twilio ヘルプセンター ](https://help.twilio.com/articles/14726256820123-What-is-a-Twilio-Account-SID-and-where-can-I-find-it-) を参照してください。

1. API 資格情報の設定の詳細が完了したら、ページの右上にある「**[!UICONTROL 送信]**」をクリックします。

>[!TAB Infobip]

_Adobe Journey Optimizer B2B Edition で Infobip を SMS プロバイダーとして設定するには：_

1. 左側のナビゲーションで、「**[!UICONTROL 管理者]**」セクションを展開し、「**[!UICONTROL 設定]**」をクリックします。

1. **[!UICONTROL API 資格情報]** リストの右上にある「_[!UICONTROL 新しい API 資格情報の作成]_ をクリックします。

1. SMS API 資格情報を設定します。

   ![Infobip SMS API 資格情報の設定 ](./assets/config-sms-api-infobip.png){width="500"}

   * **[!UICONTROL SMS ベンダー]** - SMS プロバイダーとして「`Infobip`」を選択します。

   * **[!UICONTROL 名前]** - API 資格情報定義の名前を入力します。

   * **[!UICONTROL API ベース URL]** および **[!UICONTROL API キー]** - Infobip アカウントの web インターフェイスのホームページまたは API キー管理ページにアクセスして、資格情報を検索します。

   お使いの Infobip アカウントでこの情報を見つける方法の詳細については、[Infobip のドキュメント ](https://www.infobip.com/docs/api/_blank) を参照してください。

1. API 資格情報の設定の詳細が完了したら、ページの右上にある「**[!UICONTROL 送信]**」をクリックします。

>[!ENDTABS]

「_[!UICONTROL 送信]_」をクリックすると、資格情報が直ちに検証されて保存され、_[!UICONTROL API 資格情報]_ リストページにリダイレクトされます。 送信された資格情報が無効な場合は、リストページにエラーメッセージが表示されます。 この場合、設定をキャンセルするか、設定を更新して再度送信するかを選択できます。

## アカウントジャーニーへの SMS アクションの追加

「_[!UICONTROL 特定のアクションを実行]_」ノードを追加して以下の操作を実行すると、アカウントジャーニーでテキストメッセージ配信を設定できます。

1. _[!UICONTROL アクションオン]_ ターゲットで、「**[!UICONTROL ユーザー]**」を選択します。

1. _[!UICONTROL ユーザーに対するアクション]_ で、「**[!UICONTROL SMS を送信]**」を選択します。

   ![ アクションの実行 – SMS の送信 ](assets/journey-node-send-sms.png){width="800" zoomable="yes"}

1. _[!UICONTROL アクションの実行]_ パネルの下部にある「**[!UICONTROL SMS の作成]**」をクリックします。

1. ダイアログで、メールの一意の **[!UICONTROL 名前]** と **[!UICONTROL 件名]** を入力します。

   ![ 新しい SMS を作成ダイアログ ](assets/create-new-sms.png){width="500"}

## SMS メッセージの作成

>[!IMPORTANT]
>
>**SMS 同意管理**<br/>
><br/>
>業界標準と規制に従って、すべての SMS マーケティングメッセージには、受信者が簡単に登録解除できる方法を含める必要があります。 SMS 受信者は、オプトインおよびオプトアウトのキーワードで返信ですることでこれを実行できます。すべての標準のオプトインおよびオプトアウトのキーワードがサポートされ、適用されます。 また、SMS サービスプロバイダーアカウントに設定されたカスタムキーワードもサポートされ、適用されます。

1. 送信するテキストを「**[!UICONTROL メッセージ]**」フィールドに入力します。

   160 文字ごとに 1 つの SMS メッセージと見なされる最大 1,600 文字のメッセージを作成できます。

1. **テキストメッセージをパーソナライズ**。

   テキストメッセージの作成時には、いつでもテキストメッセージボックスの右側にある _パーソナライズ_ アイコンをクリックします。

   ![ パーソナライズ アイコンをクリックして、メッセージにトークンを追加します ](./assets/sms-message-personalize-icon.png){width="800" zoomable="yes"}

   表示されたページから、Adobe Marketo Engage リードおよびシステムトークンにアクセスできます。 標準トークンとカスタムトークンの両方が含まれています。 検索バーを使用して必要なトークンを探すか、フォルダーツリーを移動して任意のリード/システムトークンを見つけて選択します。

   トークンを追加するメッセージ内の場所にカーソルを置きます。 トークンの横にあるプラス（**+**）記号をクリックして、トークンを追加します。 フォールバック（リードでフィールドが使用できない場合に表示されるデフォルト）を含むトークンを追加したい場合は、省略記号（**...**）をクリックし、「**[!UICONTROL フォールバックテキストで挿入]** を選択します。

   ![ 省略記号をクリックして、トークンのフォールバックを使用します ](./assets/sms-message-personalize-ellipsis-fallback.png){width="700" zoomable="yes"}

   _[!UICONTROL フォールバック値を入力]_ ダイアログで、フォールバックとして表示されるテキストを入力して、「**[!UICONTROL 追加]**」をクリックします。

   ![ トークンの代替テキストを入力します ](./assets/sms-message-personalize-fallback-text.png){width="400"}

   パーソナライゼーショントークンが配置されたら、「**[!UICONTROL 保存]**」をクリックして変更を保存し、メインの SMS オーサリングワークスペースに戻ります。 必要に応じて、トークンを使用してメッセージの編集を続行できます。

1. **テキストメッセージに URL を追加します**。

   コンテンツを定義したら、「_リンク_ アイコンをクリックして、メッセージに URL を追加できます。

   このアクションを実行するとダイアログが開き、リンクする URL のタイプを次の 2 つから選択できます。

   * **[!UICONTROL 外部 URL]** – このタイプは、テキストボックスに入力する外部 URL です。
   * **[!UICONTROL ランディングページ]** – 承認されたAdobe Marketo Engage Design Studio ランディングページをMarketo Engageインスタンスから選択する場合は、このオプションを選択します。

   このダイアログには、URL リンクのオプションも含まれます。

   * **[!UICONTROL URL を短縮]** - トラッキングに必要な URL を _短縮_ するには、このチェックボックスをオンにします。 ランディングページの場合は、短縮 URL にMarketo Engageサブドメインを使用します。 短縮 URL 形式のサンプルが表示されます。 実際の URL は、SMS が受信者に送信されたときに作成されます。

   * **[!UICONTROL mkt_tok を含める]** - ユーザーに対するアクティビティを追跡するには、このチェックボックスを選択します。

   リンクオプションが完了したら、「**[!UICONTROL 追加]**」をクリックして変更を保存し、SMS メッセージに URL リンクを追加します。

## SMS プロパティの設定

1. 「_[!UICONTROL SMS プロパティ]_」セクションで、メッセージの **[!UICONTROL 名前]** （必須、最大 100 文字）と **[!UICONTROL 説明]** （オプション、最大 300 文字）を入力します。

   Alpha、数字、特殊文字を使用できます。 次の予約文字は使用できません **許可されていません**:`\`、`/`、`:`、`*`、`?`、`"`、`<`、`>` および `|`。

1. **[!UICONTROL SMS タイプ]** を選択します。

   * ユーザーの同意が必要なプロモーションテキストメッセージには、`Marketing` を使用します。
   * 注文確認、パスワードリセット通知、配信情報など、非商用メッセージに `Transactional` を使用します。

1. **[!UICONTROL SMS 設定]** については、事前定義済みの API 設定の 1 つを選択します。

   この設定は、メッセージの配信に使用する SMS ゲートウェイ サービス プロバイダーおよびアカウントを決定します。

1. コミュニケーションに使用する **[!UICONTROL 送信者番号]**&#x200B;を入力します。

   ![ アクションの実行 – SMS の送信 ](./assets/sms-properties.png){width="700" zoomable="yes"}

   受信者番号は、常にMarketo Engageの `Lead.mobilePhone` フィールドにマッピングされます。

## テキストメッセージのコンテンツをシミュレート {#preview-test}

>[!CONTEXTUALHELP]
>id="ajo-b2b_sms_preview_simulate"
>title="コンテンツのレンダリング方法の確認"
>abstract="コンテンツを定義したら、プレビューして、使用しているチャネルでレンダリングが正しいかどうかを確認できます。"

メッセージコンテンツを定義したら、テストプロファイルを使用してそのコンテンツをシミュレート（プレビュー）できます。 パーソナライズされたコンテンツを挿入してある場合は、そのコンテンツがメッセージにどのように表示されるかを、テストプロファイルデータを使用して確認できます。

>[!IMPORTANT]
>
>テキストメッセージのシミュレーションを続行する前に、SMS メッセージを保存してください。

1. SMS オーサリングワークスペースの上部にある「**[!UICONTROL コンテンツをシミュレート]**」をクリックします。

1. _[!UICONTROL コンテンツをシミュレート]_ ページから、「**[!UICONTROL ユーザーを追加]**」をクリックします。

1. _コンテンツをシミュレート_ ページを使用して、テストプロファイルに使用するリードを管理します。

   表示されたリストで、任意のリード（一度に 10 件までのリード）を検索し、Marketo Engageリードデータベースから追加できます。

   検索するには、メールアドレス全体を入力して _Enter_ を押します。 対応するリードプロファイルが選択用に表示されます。

   プレビューが更新され、選択したプロファイルのパーソナライゼーションフィールドが表示されます。

   追加されたリードがすべて左側に表示されます。

   このリストを管理するには、ユーザーを追加し、プロファイルリストから個々のリードを削除します（データベースからは削除されません）。

1. 選択したリードのコンテンツをシミュレートします。

   左側にリストされている任意のリードを選択すると、対応するリードのページの SMS プレビューが更新される。

   プレビュースペースの上にあるセレクターからリードを選択して、対応するリードのページ上の SMS プレビューを更新することもできます。

1. _[!UICONTROL コンテンツをシミュレート]_ ページを終了して SMS オーサリングワークスペースに戻るには、右上の **[!UICONTROL 閉じる]** をクリックします。

## SMS 同意管理

ブランドからの連絡を登録解除する機能を受信者に提供し、この選択を遵守することは、法的要件です。 これらの規制に準拠できないと、ブランドに法的リスクが生じます。 この機能は、未承諾の通信を受信者に送信して、メッセージがスパムと見なされたり、評判が損なわれたりする危険性も回避するのに役立ちます。

このオプションを指定すると、SMS 受信者はオプトインおよびオプトアウトのキーワードを使用して返信できます。 すべての標準のオプトインおよびオプトアウトキーワードはサポートされており、適用されます。また、SMS サービスプロバイダーで設定されるカスタムキーワードも同様です。 購読を解除すると、プロファイルは、今後のマーケティングメッセージのオーディエンスから自動的に削除されます。

Journey Optimizer B2B Edition では、次のロジックを使用して SMS メッセージのオプトアウトを管理できます。

* デフォルトでは、リードがユーザーからの通信の受信をオプトアウトした場合、対応するプロファイルは後続の SMS 配信から除外されます

* このリードの同意は、様々なソース（AEP や SMS サービスプロバイダーなど）から得られ、Journey Optimizer B2B Edition に同期されます。 現在、インスタンスレベルのリードごとに 1 つの同意状態のみをサポートしています（リード「John Doe」は、インスタンス内のすべてのプロモーション SMS を購読または購読解除しています）。 現在、ブランドレベル/個々の購読リストレベルの同意でのダブルオプトインはサポートされていません。
