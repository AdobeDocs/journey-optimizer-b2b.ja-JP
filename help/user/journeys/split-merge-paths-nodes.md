---
title: パスの分割と結合
description: 分割パスノードと結合パスノードを作成して、条件付きロジックを持つアカウントと人物をセグメント化し、グループを購入してフィルタリングし、Journey Optimizer B2B editionでパスを再結合します。
feature: Account Journeys
solution: Journey Optimizer B2B Edition
role: User
exl-id: 563d6a85-504d-4c70-b075-8a9a9e88bd6b
source-git-commit: 2a676f3cbeb43616a75fa3fa6eb9106230b9fb40
workflow-type: tm+mt
source-wordcount: '2509'
ht-degree: 4%

---

# パスの分割と結合

定義した条件に従って、分割および結合パスノードを使用して個人またはアカウントをセグメント化します。 条件に従ってオーディエンスまたはアカウントのリストのパスを作成し、セグメントのアクションノードとイベントノードを使用して各パスを定義したあと、パスを組み合わせてジャーニーを続行します。

![ビデオ](../../assets/do-not-localize/icon-video.svg){width="30"} [概要ビデオを視聴](#overview-video)

_分割パス_ ノードは、アカウントフィルターまたは人物フィルターのいずれかに基づいて **_1 つ以上のセグメント化されたパス_** 定義します。 人物フィルターに基づく分割は、結合パス ノードで自動的に閉じられるので、すべての人物はアカウントコンテキストを失うことなく次のステップに進むことができます。

>[!NOTE]
>
>最大 25 個のパスがサポートされます。

## パスをアカウントで分割

（アカウントジャーニーのみ）

アカウント別に分割パスには、アカウントと人物の両方のアクションおよびイベントを含めることができます。 これらのパスは、さらに分割できます。

_&#x200B;**アカウントノードによる分割パスの仕組み**&#x200B;_

* 追加する各パスには、各エッジにノードを追加できる終了ノードが含まれます。
* 勘定科目ノードで分割はネストできます（パスを勘定科目で繰り返し分割できます）。
* 各パスの評価は、上から下に行われます。 アカウントが最初のパスと 2 番目のパスで一致する場合は、最初のパスに沿ってのみ進行します。
* 結合ノードを使用して 2 つ以上のパスを組み合わせることができます。
* このノードでは、_[!UICONTROL その他のアカウント]_ パスの定義がサポートされています。このパスで、定義されたセグメント/パスのいずれにも一致しないアカウントに対してアクションやイベントを追加できます。

![ジャーニーノード – アカウントによってパスを分割 &#x200B;](./assets/node-split-paths-account.png){width="700" zoomable="yes"}

### アカウントパス条件

| パス条件 | 説明 |
| --------------- | ----------- |
| アカウント属性 | アカウントプロファイルからの属性。次のものが含まれます。 <li>年間売上高 <li>市区町村 <li>国 <li>従業員数 <li>業界 <li>名前 <li>SIC コード <li>State <li>`<relational schema>` がある（[&#x200B; カスタムデータフィルタリング &#x200B;](#custom-data-filtering) を参照） |
| [!UICONTROL &#x200B; 特別なフィルター &#x200B;] > [!UICONTROL &#x200B; アカウントが購入グループと一致しました &#x200B;] | アカウントが 1 つ以上の購入グループと一致しています。 一致した購入グループについて、次の制約の 1 つ以上に対して評価できます。 <li>ソリューションの関心 <li>購買グループのステージ <li>購買グループのステータス <li>エンゲージメントスコア <li>完全性スコア <li> 購買グループの役割の人数 |
| [!UICONTROL &#x200B; 特殊フィルター &#x200B;] > [!UICONTROL &#x200B; 購入グループあり &#x200B;] | アカウントに購買グループのメンバーがいないか、メンバーがいません。 また、次の 1 つ以上の条件に照らして評価することもできます。 <li>ソリューションの関心 <li>購買グループのステージ <li>購買グループのステータス <li>エンゲージメントスコア <li>完全性スコア |

>[!NOTE]
>
>_[!UICONTROL 購入グループあり]_ フィルターは今後の廃止のためにマークされています。 新規ジャーニーの場合は、「_[!UICONTROL アカウントは購入グループと一致しました]_」フィルターを使用します。このフィルターには、同じ制約がすべて含まれます。

### アカウントノードによる分割パスの追加

1. ジャーニーマップに移動します。

1. パスのプラス（**+**）アイコンをクリックし、「**[!UICONTROL パスを分割]**」を選択します。

   ![&#x200B; ジャーニーノードの追加 – 分割パス &#x200B;](./assets/add-node-split.png){width="300" zoomable="no"}

1. 右側のノードプロパティで、分割の **[!UICONTROL アカウント]** を選択します。

1. _[!UICONTROL パス 1]_ に適用できる条件を定義するには、「**[!UICONTROL 条件を適用]**」をクリックします。

   ![&#x200B; 分割パスノード – 条件を追加 &#x200B;](./assets/node-split-properties-apply-condition.png){width="500" zoomable="yes"}

1. 条件エディターで、1 つ以上のフィルターを追加して、分割パスを定義します。

   * 左側のナビゲーションからフィルター属性をドラッグ&amp;ドロップし、一致の定義を完了します。

   * 上部の **[!UICONTROL フィルターロジック]** を適用して、条件を微調整します。 すべてのフィルターまたは任意のフィルターに一致するように選択します。

     ![&#x200B; 分割パスノード – 条件アカウントフィルターロジック &#x200B;](./assets/node-split-conditions-accounts.png){width="700" zoomable="yes"}

   * 「**[!UICONTROL 完了]**」をクリックします。

1. パスを追加するには、「**[!UICONTROL パスを追加]** をクリックし、前の手順を繰り返して、このパスに適用される条件を追加します。

   また、これらの条件に基づいて各パスにラベルを付けたり、デフォルトのラベルを使用したりできます。

1. 必要に応じて、分割する優先度に従ってパスを並べ替えます。

   パスフィルターは、上から順に評価されます。 各アカウントは、一致する最初のパスに沿って進みます。

   各パスカードの右上にある上向き矢印と下向き矢印をクリックし、パスのリストでカードを上下に移動します。

   ![&#x200B; パスを分割ノード – パスの並べ替え &#x200B;](./assets/node-split-reorder-paths-accounts.png){width="500" zoomable="yes"}

1. 「**[!UICONTROL その他のアカウント]**」オプションを有効にして、定義されたセグメント/パスと一致しないアカウントのデフォルトパスを定義します。

   このオプションを無効にすると、分割内で定義されたセグメント/パスに一致しないアカウントの場合、ジャーニーは終了します。

### アカウントの購入グループフィルタリング {#buying-group-filtering-accounts}

購買グループに関連付けられたアカウントのパスを定義し、購買グループ基準を使用してパスをフィルタ処理できます。 **[!UICONTROL Account has matched buying group]** フィルターを使用して、一致した購入グループを使用してパスセグメントを定義します。 このフィルターには、一致した購入グループ内で割り当てられた役割の数に基づいてアカウントを識別するオプションも含まれています。

例えば、3 人の意思決定者と 2 人のインフルエンサーなど、異なる役割における深さ（人数）に基づいて購入グループの準備状況を評価する場合があります。 この場合、条件を設定して、一致した購入グループ内の意思決定者 3 人とインフルエンサー 2 人のうち少なくとも 3 人のアカウントをターゲットにします。

1. 「**[!UICONTROL フィルターを追加]**」をクリックして、「**[!UICONTROL 購入グループの役割のユーザー数]** フィルターを選択します。

   ![&#x200B; アカウントのフィルターを追加して購入グループと一致させ、購入グループの役割のユーザー数を選択しました &#x200B;](./assets/node-split-account-condition-matched-buying-group-number-people-role.png){width="700" zoomable="yes"}

1. 最初の役割パラメーターを定義します。

   * 人物評価の数を `at least` に設定し、値を `3` に設定します。
   * 役割の評価を `is` に設定し、役割のリストから `Decision Maker` を選択します。

1. 手順 1 を繰り返して、別の購入グループの役割パラメーターを追加します。

1. 2 つ目の役割パラメーターを定義します。

   * 人物評価の数を `at least` に設定し、値を `2` に設定します。
   * 役割の評価を `is` に設定し、役割のリストから `Influencer` を選択します。

   ![&#x200B; アカウントのマッチした購入グループにおける役割の深さの条件例 &#x200B;](./assets/node-split-account-condition-matched-buying-group-role-depth-example.png){width="700" zoomable="yes"}

1. パスのすべての条件を定義したら、「**[!UICONTROL 完了]**」をクリックします。

識別されたアカウントについては、パスにアクションノードを追加して、購入グループまたはステージのステータスを更新したり、販売アラートメールを送信したりできます。

### カスタムデータフィルタリング

[!BADGE Beta]{type=Informative url="/help/user/admin/engagement-score-weighting.md" tooltip="シンプル化されたアーキテクチャのベータ版機能として使用できます"}

リレーショナルスキーマ（モデルベースのクラス）を使用して、アカウント別にパスを分割できます。 カスタムオブジェクトは _リレーショナルスキーマ_ 内で定義され、製品管理者は [&#x200B; で &#x200B;](../admin/xdm-field-management.md#relational-schemas) リレーショナルスキーマフィールドを設定 [!DNL Journey Optimizer B2B Edition] することができます。 選択したスキーマフィールドは、条件エディターで使用でき、アカウントノード別の分割パスで使用できます。

![&#x200B; オファーのリレーショナルスキーマの条件の例 &#x200B;](./assets/node-split-paths-account-relational-schema.png){width="700" zoomable="yes"}

<!-- SPHR-23746

Note: These are currently going under Account Attributes folder, which is a bug (SPHR-21734). This will move to Special filters when resolved (January release).

This will also be available for split paths by people (under special filters) for the M 1.5 GA release.
-->

## パスをユーザーで分割

人物で分割パスには、人物アクションのみを含めることができます。 これらのパスを再度分割して自動的に結合することはできません。

_&#x200B;**人物ノードによる分割パスの仕組み**&#x200B;_

* 人物ノードによる分割は、_グループ化されたノード_ の分割 – 結合の組み合わせ内で機能します。 分割パスは自動的に結合されるため、すべてのユーザーはアカウントのコンテキストを維持しながら次のステップに進むことができます。
* 人物で分割ノードはネストできません（このグループ化されたノード内のパスに人物の分割パスを追加することはできません）。
* 各パスの評価は、上から下に行われます。 1 番目と 2 番目のパスに一致する人物は、1 番目のパスにのみ沿って進みます。
* ノードでは、_アカウントと担当者の関係_ の使用がサポートされています。これにより、関係で定義されている役割（契約者やフルタイムの従業員など）に基づいて担当者をフィルタリングできます。
* ノードでは _[!UICONTROL その他のユーザー]_ パスの定義がサポートされており、定義されたセグメント/パスのいずれにも一致しないユーザーに対してアクションやイベントを追加できます。

![&#x200B; アカウントジャーニーノード – 人物ごとにパスを分割 &#x200B;](./assets/node-split-paths-people.png){width="700" zoomable="yes"}

### 人物パスフィルター

| フィルター | 説明 |
| ------------ | ----------- |
| [!UICONTROL &#x200B; アクティビティ履歴 &#x200B;] > [!UICONTROL &#x200B; メール &#x200B;] | ジャーニーの前の段階で選択した 1 つ以上のメールメッセージを使用して評価される条件に基づくメールアクティビティ： <li>[!UICONTROL &#x200B; メール内のクリックされたリンク &#x200B;] <li>メールを開封済み <li>メール配信済み <li>電子メールを送信しました <br>**[!UICONTROL &#x200B; 非アクティビティフィルターに切り替え &#x200B;]**– このオプションを使用して、アクティビティの欠如（ユーザーが電子メールアクティビティを持っていない）に基づいてフィルタリングします。 |
| [!UICONTROL &#x200B; アクティビティ履歴 &#x200B;] > [!UICONTROL SMS メッセージ &#x200B;] | ジャーニーの前の段階で選択した 1 つ以上の SMS メッセージを使用して評価される条件に基づく SMS アクティビティ。 <li>[!UICONTROL SMS 内のクリックされたリンク &#x200B;] <li>[!UICONTROL SMS バウンス &#x200B;]<br>**[!UICONTROL &#x200B; 非アクティビティフィルターに切り替え &#x200B;]**– このオプションを使用して、アクティビティの欠如（ユーザーが SMS アクティビティを持っていない）に基づいてフィルタリングします。 |
| [!UICONTROL &#x200B; アクティビティ履歴 &#x200B;] > [!UICONTROL &#x200B; データ値が変更されました &#x200B;] | 選択したユーザー属性に対して、値が変更されました。 次のような変更タイプがあります。 <li>新しい値<li>前回の値<li>理由<li>ソース<li>アクティビティの日付<li>分回数 <br>**[!UICONTROL &#x200B; 非アクティビティフィルターに切り替え &#x200B;]**– このオプションを使用すると、アクティビティの欠如（データ値が変更されていない）に基づいてフィルタリングできます。 |
| [!UICONTROL &#x200B; アクティビティの履歴 &#x200B;] > [!UICONTROL Had Interesting Moment] | 関連する [!DNL Marketo Engage] インスタンスで定義される興味深いモーメントアクティビティ。 制約には次のものが含まれます。 <li>マイルストーン<li>メール<li>Web<br>**[!UICONTROL &#x200B; 非アクティビティフィルターに切り替え &#x200B;]**– このオプションを使用して、アクティビティの欠如（ある人物が興味深い瞬間を持っていなかった）に基づいてフィルタリングします。 |
| [!UICONTROL &#x200B; アクティビティ履歴 &#x200B;] > [!UICONTROL &#x200B; 訪問した web ページ &#x200B;] | 関連する [!DNL Marketo Engage] インスタンスによって管理される 1 つ以上の web ページに対して実行される web ページアクティビティ。 制約には次のものが含まれます。 <li>Web ページ （必須）<li>アクティビティの日付<li>クライアント IP アドレス <li>クエリ文字列 <li>リファラー <li>ユーザーエージェント <li>検索エンジン <li>検索クエリ <li>パーソナライズ URL <li>トークン <li>ブラウザー <li>Platform <li>デバイス <li>分回数 <br>**[!UICONTROL &#x200B; 非アクティビティフィルターに切り替え &#x200B;]**– このオプションを使用すると、ユーザーが web ページにアクセスしなかったときに、非アクティブになったときにフィルターを適用できます。 |
| [!UICONTROL &#x200B; 人物の属性 &#x200B;] | ユーザープロファイルからの属性。以下が含まれます。 <li>市区町村 <li>国 <li>生年月日 <li>メールアドレス <li>メール無効 <li>メール中断済み <li>名 <li>推測される都道府県 / 地域<li>役職 <li>姓 <li>携帯電話番号 <li>人物エンゲージメントスコア <li>電話番号 <li>郵便番号 <li>ステート <li>配信停止完了 <li>登録解除の理由 |
| [!UICONTROL &#x200B; 特殊フィルター &#x200B;] > [!UICONTROL &#x200B; 購買グループのメンバー &#x200B;] | 次の 1 つ以上の条件に照らして評価された、その人物は購買グループ・メンバーであるか、そうでないメンバーである： <li>ソリューションの関心</li><li>購買グループのステータス</li><li>完全性スコア</li><li>エンゲージメントスコア</li><li>役割</li> |
| [!UICONTROL &#x200B; 特殊フィルター &#x200B;] > [!UICONTROL &#x200B; リストのメンバー &#x200B;] | ユーザーが 1 つ以上の [!DNL Marketo Engage] リストのメンバーである、またはメンバーではない。 |
| [!UICONTROL &#x200B; 特殊フィルター &#x200B;] > [!UICONTROL &#x200B; プログラムのメンバー &#x200B;] | ユーザーが 1 つ以上の [!DNL Marketo Engage] プログラムのメンバーである、またはメンバーではない。 |

### アカウントと人物のパス条件

| パス条件 | 説明 |
| --------------- | ----------- |
| [!UICONTROL &#x200B; アカウント内の役割 &#x200B;] | その人物は、アカウントで役割が割り当てられているか、割り当てられていません。 オプション制約： <li>役割名 |

### 人物ノードによる分割パスの追加

>[!NOTE]
>
>パスをユーザーで分割すると、_分割パスを閉じる_ ノードが自動的に挿入されて分割が終了します。 ユーザーごとに分割されたパスでは、人物ノードに対してのみ _アクションを実行_ できます。

1. ジャーニーマップに移動します。

1. パスのプラス（**+**）アイコンをクリックし、「**[!UICONTROL パスを分割]**」を選択します。

   ![&#x200B; ジャーニーノードの追加 – 分割パス &#x200B;](./assets/add-node-split.png){width="300" zoomable="no"}

1. 右側のノードプロパティで、分割の **[!UICONTROL 人物]** を選択します。

1. （アカウントジャーニーのみ） **[!UICONTROL 条件に使用する属性]** を設定します。

   * 人物プロファイルに関連する条件を使用するには、「**[!UICONTROL 人物属性のみ]**」を選択します。
   * アカウント内のユーザーのロールメンバーシップに関連する条件を使用するには、「**[!UICONTROL アカウント人物属性のみ]**」を選択します。

1. _[!UICONTROL パス 1]_ に適用できる条件を定義するには、「**[!UICONTROL 条件を適用]**」をクリックします。

1. 条件エディターで、1 つ以上のフィルターを追加して、分割パスを定義します。

   * 左側のナビゲーションから人物フィルターをドラッグ&amp;ドロップして、一致の定義を完了します。

     >[!NOTE]
     >
     >Experience Platformのアカウントオーディエンススキーマで定義されたカスタム人物フィールドがある場合、これらのフィールドを条件の人物属性として使用することもできます。

   * 上部の **[!UICONTROL フィルターロジック]** を適用して、条件を微調整します。 すべての属性条件または任意の条件に一致するように選択します。

     ![&#x200B; 分割パスノード – 条件ユーザーフィルターロジック &#x200B;](./assets/node-split-conditions-people.png){width="700" zoomable="yes"}

   * 「**[!UICONTROL 完了]**」をクリックします。

1. パスを追加するには、「**[!UICONTROL パスを追加]** をクリックし、前の手順を繰り返して、このパスに適用される条件を追加します。

   また、これらの条件に基づいて各パスにラベルを付けたり、デフォルトのラベルを使用したりできます。

1. 必要に応じて、分割する優先度に従ってパスを並べ替えます。

   パスフィルターは、上から順に評価されます。 各ユーザーは、一致する最初のパスに沿って進みます。

   各パスカードの右上にある上向き矢印と下向き矢印をクリックし、パスのリストでカードを上下に移動します。

   ![&#x200B; パスを分割ノード – パスの並べ替え &#x200B;](./assets/node-split-reorder-paths-people.png){width="500" zoomable="yes"}

1. **[!UICONTROL その他のユーザー]** オプションを有効にして、定義されたパスと一致しないユーザーのデフォルトパスを追加します。

   このオプションが有効になっていない場合、定義されたセグメント/パスに一致しない人物は、分割を通過してジャーニーの次のステップに進みます。

   人物レベルでオーディエンスを分割するための条件をパスごとに定義した場合は、人物に対して実行するアクションを追加できます。

### アクティビティフィルタリング

ユーザーによる分割パスの場合、次に関連するユーザーのアクティビティに応じてパスを定義できます。

* ジャーニーの前半で送信されたメールメッセージ
* ジャーニーの前半での SMS メッセージ
* ユーザープロファイルのデータ値の変更
* メール、web ページまたはマイルストーンに関連付けられた興味深い瞬間（[!DNL Marketo Engage] でトラッキング）
* Web ページへの訪問（[!DNL Marketo Engage] でトラッキング）

>[!BEGINSHADEBOX  「無操作状態のフィルタリング」 ]

_[!UICONTROL アクティビティ履歴]_ フィルターごとに「**[!UICONTROL 非アクティビティフィルターに切り替え]**」オプションを有効にできます。 このオプションを選択すると、そのアクティビティタイプが存在しない場合、フィルターが評価に変更されます。 例えば、_[!UICONTROL メール]_/_[!UICONTROL 開封されたメール]_ フィルターを追加して、ジャーニーの前半からメールを _&#x200B;**開封しなかった**&#x200B;_ ユーザー用のパスを作成します。 非アクティブ オプションを有効にし、メールを指定します。 _[!UICONTROL アクティビティの日付]_ 制約を使用して、非アクティビティの期間を定義することをお勧めします。

![&#x200B; 購買グループ メンバーシップの条件でパスを人物別に分割 &#x200B;](./assets/node-split-people-condition-inactivity.png){width="700" zoomable="yes"}

>[!ENDSHADEBOX]

### メンバーシップのフィルター

_[!UICONTROL 特別なフィルター]_ セクションには、購入グループまたは [!DNL Marketo Engage] ーザーリスト内の人物のメンバーシップを評価するために使用できる複数のフィルターがあります。 例えば、購入グループのメンバーで特定の役割が割り当てられている人物のパスを作成する場合は、_[!UICONTROL 特別なフィルター]_/_[!UICONTROL 購入グループのメンバー]_ フィルターを追加します。 フィルターの場合、メンバーシップを _true_ に設定し、1 つ以上の購入グループに関連付けられている _[!UICONTROL ソリューションの関心]_ を選択して、一致させる _[!UICONTROL 役割]_ を設定します。

![&#x200B; 購買グループ メンバーシップの条件でパスを人物別に分割 &#x200B;](./assets/node-split-people-condition-buying-group-membership.png){width="700" zoomable="yes"}

>[!BEGINSHADEBOX  「Marketo Engage リストのメンバーシップ」 ]

ま [!DNL Marketo Engage]、_スマートキャンペーン_ は、プログラムのメンバーシップを確認して、リードが重複したメールを受信したり、複数のメールストリームに同時にメンバーとなったりしないようにします。 Journey Optimizer B2B では、ジャーニーアクティビティの重複 [!DNL Marketo Engage] 排除するために、ユーザーによる分割パスの条件としてリストメンバーシップを確認できます。

分割条件でリスト メンバシップを使用するには、[**[!UICONTROL 特殊フィルタ]**] を展開し、[**[!UICONTROL リストのメンバ]**] 条件をフィルタ スペースにドラッグします。 フィルター定義を完了して、1 つ以上の [!DNL Marketo Engage] リストのメンバーシップを評価します。

![&#x200B; リストのメンバーシップに対する人物によるパス [!DNL Marketo Engage] 分割の条件 &#x200B;](./assets/node-split-paths-conditions-people-member-of-list.png){width="700" zoomable="yes"}

>[!ENDSHADEBOX]

## パスを結合

_結合パス_ ノードを追加して、ジャーニー内のアカウント別に異なる分割パスを組み合わせます。

1. ジャーニーマップに移動します。

1. パスのプラス（**+**）アイコンをクリックし、「**[!UICONTROL パスを分割]**」を選択します。

1. 分割ノードをクリックして、右側のプロパティを開きます。

1. 「[!UICONTROL &#x200B; パスを追加 &#x200B;]」をクリックして、3 つのパスを作成します。

1. 各パスにアクションとイベントの組み合わせを追加します。

1. これらのパスのいずれかのプラス（**+**）アイコンをクリックし、表示されるオプションから **[!UICONTROL 結合]** を選択します。

   ![ジャーニーノード – パスの結合 &#x200B;](./assets/node-plus-icon-merge-paths.png){width="400" zoomable="no"}

1. パスの結合ノードのプロパティで、結合するパスを選択します。

   ![ジャーニーノード – パスの結合 &#x200B;](./assets/node-merge-select-paths.png){width="600" zoomable="yes"}

   この時点で、パスが結合され、選択したパスのアカウントが 1 つのパスに結合され、ジャーニーを通じて進行し続けることができます。

1. 必要に応じて、パスの結合ノードのプロパティに戻り、削除するパスのチェックボックスをオフにすることで、パスの結合を解除できます。

## 概要動画

>[!VIDEO](https://video.tv.adobe.com/v/3443257/?captions=jpn&learn=on)
